{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-16T15:58:40.933Z",
  "summary": "Frontend adds a new Social route/page with Friends/Messages/Parties/Following tabs, plus a CreatorFollowButton on Experience Details and several new React Query hooks. Backend/main.mo shows new social-related types and storage maps, but the diff excerpt does not show the required backend API methods for friend requests, messaging conversations, parties, following, or user discovery. Several frontend hooks for parties/following are explicitly placeholders/disabled, and Parties UI is a “Coming soon” placeholder.",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "Implement backend social graph features: friend requests (send, accept, decline/cancel), friends list, and friend request inbox/outbox, all scoped to authenticated users and keyed by Principal.",
      "reason": "backend/main.mo excerpt shows types and storage (FriendRequestStatus/FriendRequest, friendships/friendRequests maps) but does not show the required public methods (send/accept/decline/cancel, inbox/outbox list, friends list) nor permission checks for these APIs in the provided diff summary.",
      "evidence": [
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Implement backend private messaging: direct message threads between two Principals with APIs to create/find a conversation, send messages, list conversations, and fetch messages for a conversation.",
      "reason": "backend/main.mo excerpt defines a Message type and a messages map, but no messaging API methods are shown (send message, list conversations, fetch messages, conversation access control). Frontend hooks only call getMessages(receiver) and sendMessage(...) and do not implement conversation list/create/find.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/hooks/useSocialMessages.ts",
        "frontend/src/components/social/MessagesPanel.tsx"
      ]
    },
    {
      "id": "REQ-3",
      "requirement": "Implement backend party system: create party, invite users, accept/decline invites, join/leave party, list current party state for the caller, and optionally associate a party with an experienceId.",
      "reason": "No party data structures or party APIs are shown in backend/main.mo excerpt. Frontend party hook is a placeholder with queries disabled, and the Parties panel is explicitly “Coming soon”.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/hooks/useSocialParties.ts",
        "frontend/src/components/social/PartiesPanel.tsx"
      ]
    },
    {
      "id": "REQ-4",
      "requirement": "Implement backend creator following: follow/unfollow, list followed creators, and follower count for a creator principal.",
      "reason": "Frontend following hooks are explicitly placeholders (return empty/0, throw 'coming soon', and are disabled). No backend following APIs are shown in backend/main.mo excerpt.",
      "evidence": [
        "frontend/src/hooks/useSocialFollowing.ts",
        "backend/main.mo",
        "frontend/src/components/social/FollowingPanel.tsx",
        "frontend/src/components/experiences/CreatorFollowButton.tsx"
      ]
    },
    {
      "id": "REQ-5",
      "requirement": "Add backend user discovery endpoints: search users by display name (case-insensitive), bounded results, returning principal + displayName (+ avatar if available), with consistent auth requirement.",
      "reason": "Frontend calls actor.searchUsersByDisplayName(searchTerm), but the backend/main.mo excerpt does not show an implementation of this query (case-insensitive matching, bounded results, and explicit auth policy are not evidenced).",
      "evidence": [
        "frontend/src/hooks/useUserDiscovery.ts",
        "backend/main.mo"
      ]
    },
    {
      "id": "REQ-6",
      "requirement": "Social area includes Friends, Messages, Parties, Following sections supporting the requested management features (requests + friends list; inbox/conversations + thread view + compose; current party + invites; followed creators list), with empty/loading states and auth-block messaging with navigation path to Sign Up / Log In.",
      "reason": "While the Social hub route, tabs, loading/empty patterns, and an auth-required gate exist, the Parties section is only a “Coming soon” placeholder and does not provide current party/invites management. Also, following/friends/messaging depend on backend/hook functionality that is not implemented/active for following/parties.",
      "evidence": [
        "frontend/src/pages/Social.tsx",
        "frontend/src/components/social/PartiesPanel.tsx",
        "frontend/src/hooks/useSocialParties.ts",
        "frontend/src/hooks/useSocialFollowing.ts"
      ]
    },
    {
      "id": "REQ-7",
      "requirement": "Create new React Query hooks for social APIs (friends, messages, parties, following, user search) with proper invalidation and without editing immutable hook files.",
      "reason": "Friends/messages/user search hooks exist, but parties and following hooks are placeholders/disabled and do not call backend APIs. Messaging hooks do not cover listing conversations or creating/finding a conversation as required by REQ-2/REQ-7.",
      "evidence": [
        "frontend/src/hooks/useSocialFriends.ts",
        "frontend/src/hooks/useSocialMessages.ts",
        "frontend/src/hooks/useSocialParties.ts",
        "frontend/src/hooks/useSocialFollowing.ts",
        "frontend/src/hooks/useUserDiscovery.ts"
      ]
    },
    {
      "id": "REQ-8",
      "requirement": "Add Follow creator UI on Experience Details page reflecting follow state and follower count, updating after toggle, preventing self-follow, and hidden/disabled when not authenticated.",
      "reason": "A follow/unfollow button is added, and self-follow is prevented, but the underlying follow hooks are placeholders/disabled and throw 'coming soon', so state cannot reflect real follow status. Follower count is not displayed/queried in the Experience Details UI as shown.",
      "evidence": [
        "frontend/src/pages/ExperienceDetails.tsx",
        "frontend/src/components/experiences/CreatorFollowButton.tsx",
        "frontend/src/hooks/useSocialFollowing.ts"
      ]
    }
  ],
  "hallucinated_features": [],
  "confidence": 0.74,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/App.tsx",
    "frontend/src/components/experiences/CreatorFollowButton.tsx",
    "frontend/src/components/layout/LeftSidebar.tsx",
    "frontend/src/components/social/FollowingPanel.tsx",
    "frontend/src/components/social/FriendsPanel.tsx",
    "frontend/src/components/social/MessagesPanel.tsx",
    "frontend/src/components/social/PartiesPanel.tsx",
    "frontend/src/hooks/useSocialFollowing.ts",
    "frontend/src/hooks/useSocialFriends.ts",
    "frontend/src/hooks/useSocialMessages.ts",
    "frontend/src/hooks/useSocialParties.ts",
    "frontend/src/hooks/useUserDiscovery.ts",
    "frontend/src/pages/ExperienceDetails.tsx",
    "frontend/src/pages/Social.tsx",
    "project_state.json"
  ]
}